#summary Describes the configuration of pChart4mw
#labels Phase-Deploy

= Configuration =
To configure this extension, several parameters can be set. A few options are needed for the extension to function properly. Other parameters are optional.

== Obligatory settings ==
;pChart location
:Defines the location where pChart is installed. THis variable contains the absolute path to the directory where the pChart class resides. Add the following line to LocalSettings.php
:<pre>$wgPChart4mwPChartPath = $_SERVER[ "DOCUMENT_ROOT" ] . "/pchart";</pre>
:to point to [documentroot]/pchart/pChart.class.

;font location
:Determines the truetype font file to write text into the graph. This variable contains the absolute path to the .ttf file. THe pChart installation contains some font files by default in the Fonts subdirectory. Add the following line to LocalSettings.php:
:<pre>$wgPChart4mwFont = $wgPChart4mwPChartPath . "/Fonts/tahoma.ttf";</pre>
:to use the tahoma.ttf font from the Fonts subdirectory in the pChart directory.

== Optional settings ==

;image format
:Determines the file type of the chart images. Can be 'png', 'jpeg' or 'gif'. The default value is 'png'. 
:Add the following line to LocalSettings.php
:<pre>$wgPChart4mwImageFormat = "png";</pre>

;cache enabled
:Flag whether the built-in cache should be used. Using the cache the system will only create each chart once and save it to disk. If no changes are detected, the image that is already created will be used. The default value for this parameter is true.
:Add the following line to LocalSettings.php
:<pre>$wgPChart4mwCacheEnabled= true;</pre>

;cache directory
:Directory where the created images are saved. The images are saved to this directory when created, and the saved file is loaded on the page where it should be shown. When the cache is enabled, the file is created only once, saving a lot of processing time when a page is loaded frequently. If anything in the chart code is changed, a new file is created. When the cache is disabled, the file is created again every time a page is loaded.
:The directory must be specified as a subdirectory of the $wgUploadPath directory. The directory must exist an be writable. By default, the cache directory is $wgUploadPath/pChart4mw ([wiki]/images/pChart4mw).
:Add the following line to LocalSettings.php
:<pre>$wgPChart4mwCacheDir = "pChart4mw";</pre>

;font size
:Fontsize in points that is used for writing text into the charts. Add the following line to LocalSettings.php
:<pre>$wgPChart4mwFontSize	= 8;</pre>

;color scheme directory
:Directory containing the color schemes. These color schemes are text files with a color on each line. Every color is a comma-separated RGB color. An example is
   0,0,0
   51,51,51
   102,102,102
   153,153,153
   204,204,204
   255,255,255
:The default value for this parameter is the subdirectory /colorschemes in the extensions/pChart4mw subdirectory.
:All text files in this directory can be used as colorscheme. To do that, use the [[parameters|colorscheme]] parameter.
:Add the following line to LocalSettings.php
:<pre>$wgPChart4mwDefaultColorSchemeDir = "$IP/extensions/pChart4mw/colorschemes";</pre>
:to use the subdirectory /colorschemes of the pChart4mw subdirectory.

;webservice
:pChart4mw contains the possibility to use a webservice to generate the charts. This can be useful is you want to use a different server to create the images. You can use the pChartwebservice.php or create your own webservice. More information can be found on the [[webservice]] page.
:If you leave this parameter emtpy, no webservice is used. That is also the default value.
:Add the following line to LocalSettings.php
:<pre>$wgPChart4mwWebservice	= "http://localhost:8000/wiki/extensions/pChart4mw/pChartWebservice.php";</pre>

==Default settings==
You can set default settings for all charts on your wiki. All [[parameters]] that can be set for the charts, can also be set to a default value.

To set a default size for all charts, add the following line to LocalSettings.php
  $wgPChart4mwDefaults = Array ( "size" => "200x120" );

You can separate multiple settings with a comma.
  $wgPChart4mwDefaults = Array ( "size" => "200x120", "colorscheme" => "softblue" );

Another possibility is to set default values for a specific type of chart. This can be done by adding the following lines (or similar for different types of charts) to LocalSettings.php
  $wgPChart4mwLinesDefaults = Array ( "grid" => "false", "ymin" => "0", "colors" => "F00,0F0,00F" );
  $wgPChart4mwBarsDefaults = Array ( "ymin" => "0" );
  $wgPChart4mwPieDefaults = Array ( "3d" => "3d" );